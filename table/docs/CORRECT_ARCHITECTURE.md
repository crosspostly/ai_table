# üèóÔ∏è –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê - AI Table Bot

## üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï**

**–û–®–ò–ë–ö–ê –í –ü–†–ï–î–´–î–£–©–ï–ô –ò–ù–°–¢–†–£–ö–¶–ò–ò!** –ù—É–∂–Ω—ã **–î–í–ê –û–¢–î–ï–õ–¨–ù–´–• –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø**, –∞ –Ω–µ –æ–¥–Ω–æ!

---

## üéØ **–ö–õ–ò–ï–ù–¢-–°–ï–†–í–ï–†–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê**

### üñ•Ô∏è **SERVER - Apps Script Web Application**
**–ß—Ç–æ:** –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Google Apps Script  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã  
**URL:** `https://script.google.com/macros/s/[SERVER_ID]/exec`

**–§–∞–π–ª—ã —Å–µ—Ä–≤–µ—Ä–∞:**
```
üìÅ SERVER (Apps Script Web App)
‚îú‚îÄ‚îÄ üìÑ ServerEndpoints.gs          (doGet, doPost)
‚îú‚îÄ‚îÄ üìÑ SocialImportService.gs      (–∏–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–æ–≤)
‚îú‚îÄ‚îÄ üìÑ ValidationService.gs        (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
‚îú‚îÄ‚îÄ üìÑ RetryService.gs            (–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å)
‚îú‚îÄ‚îÄ üìÑ ErrorHandlingService.gs     (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)
‚îú‚îÄ‚îÄ üìÑ TableLicenseService.gs     (–ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îú‚îÄ‚îÄ üìÑ TelegramImportService.gs   (Telegram API)
‚îî‚îÄ‚îÄ üìÑ [–¥—Ä—É–≥–∏–µ server —Ñ–∞–π–ª—ã...]
```

### üíª **CLIENT - Google Sheets + Apps Script**
**–ß—Ç–æ:** Google Sheets —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º Apps Script  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞  
**–°–≤—è–∑—å:** –î–µ–ª–∞–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É

**–§–∞–π–ª—ã –∫–ª–∏–µ–Ω—Ç–∞:**
```
üìÅ CLIENT (Google Sheets + Apps Script)  
‚îú‚îÄ‚îÄ üìÑ ThinClient.gs              (HTTP –∫–ª–∏–µ–Ω—Ç)
‚îú‚îÄ‚îÄ üìÑ Menu.gs                    (–º–µ–Ω—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
‚îú‚îÄ‚îÄ üìÑ GeminiClient.gs            (AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ üìÑ ChatMode.gs                (—á–∞—Ç —Ä–µ–∂–∏–º)
‚îî‚îÄ‚îÄ üìÑ SmartPromptProcessor.gs    (—É–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã)
```

---

## üìã **–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –£–°–¢–ê–ù–û–í–ö–ê**

### üî• **–≠–¢–ê–ü 1: –°–û–ó–î–ê–ù–ò–ï –°–ï–†–í–ï–†–ê**

#### 1.1 –°–æ–∑–¥–∞—Ç—å Apps Script Web Application
1. –û—Ç–∫—Ä–æ–π—Ç–µ [script.google.com](https://script.google.com)
2. **"–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç"** ‚Üí –Ω–∞–∑–æ–≤–∏—Ç–µ `"AI Table Bot Server"`
3. –£–¥–∞–ª–∏—Ç–µ –∫–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

#### 1.2 –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã
**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï:**
- `ServerEndpoints.gs` ‚Üê **–ì–õ–ê–í–ù–´–ô** (doGet, doPost)
- `SocialImportService.gs`
- `ValidationService.gs`  
- `RetryService.gs`
- `ErrorHandlingService.gs`
- `TableLicenseService.gs`

#### 1.3 –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–∞–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
1. **Deploy** ‚Üí **New deployment**
2. **Type:** Web app
3. **Execute as:** Me
4. **Who has access:** Anyone
5. –ù–∞–∂–∞—Ç—å **Deploy**
6. **–°–û–•–†–ê–ù–ò–¢–¨ URL!** `https://script.google.com/macros/s/[ID]/exec`

### üî• **–≠–¢–ê–ü 2: –°–û–ó–î–ê–ù–ò–ï –ö–õ–ò–ï–ù–¢–ê**

#### 2.1 –°–æ–∑–¥–∞—Ç—å Google Sheets
1. –û—Ç–∫—Ä–æ–π—Ç–µ [sheets.google.com](https://sheets.google.com)
2. **"–°–æ–∑–¥–∞—Ç—å"** ‚Üí –Ω–∞–∑–æ–≤–∏—Ç–µ `"AI Table Bot Client"`
3. –°–æ–∑–¥–∞–π—Ç–µ –ª–∏—Å—Ç **"–ü–∞—Ä–∞–º–µ—Ç—Ä—ã"**

#### 2.2 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Apps Script –∫–ª–∏–µ–Ω—Ç–∞
1. **Extensions** ‚Üí **Apps Script**
2. –£–¥–∞–ª–∏—Ç–µ –∫–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ñ–∞–π–ª—ã:
   - `ThinClient.gs` ‚Üê **–ì–õ–ê–í–ù–´–ô –ö–õ–ò–ï–ù–¢**
   - `Menu.gs` ‚Üê –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - `GeminiClient.gs` ‚Üê AI —Ñ—É–Ω–∫—Ü–∏–∏

#### 2.3 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SERVER_URL
–í –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º Apps Script —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Constants.gs`:
```javascript
// SERVER_URL - URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
var SERVER_URL = 'https://script.google.com/macros/s/[–í–ê–®_SERVER_ID]/exec';
```

---

## üîÑ **–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢**

### **–ü—Ä–∏–º–µ—Ä –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –Ω–∞–∂–∏–º–∞–µ—Ç –≤ Google Sheets: `"–ò–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–æ–≤"`
2. **–ö–ª–∏–µ–Ω—Ç** (`ThinClient.gs`) –¥–µ–ª–∞–µ—Ç HTTP POST –∫ —Å–µ—Ä–≤–µ—Ä—É:
   ```javascript
   var serverRequest = {
     action: 'social_import',
     email: 'user@example.com', 
     token: 'license_token',
     source: 'https://instagram.com/nasa',
     count: 20
   };
   callServer(serverRequest);
   ```

3. **–°–µ—Ä–≤–µ—Ä** (`ServerEndpoints.gs`) –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å:
   ```javascript
   function doPost(e) {
     var data = JSON.parse(e.postData.contents);
     if (data.action === 'social_import') {
       return importSocialPosts(data);
     }
   }
   ```

4. **–°–µ—Ä–≤–µ—Ä** –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏–º–ø–æ—Ä—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. **–ö–ª–∏–µ–Ω—Ç** –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ Google Sheets

---

## ‚öôÔ∏è **–†–ê–ó–õ–ò–ß–ò–Ø –í –§–£–ù–ö–¶–ò–Ø–•**

### **–°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `importSocialPosts()` - –∏–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–æ–≤
- `validateAndSanitizeInputs()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `doPost()`, `doGet()` - API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:**  
- `importVkPostsThin()` - UI –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
- `callServer()` - HTTP –∫–ª–∏–µ–Ω—Ç
- `onOpen()` - –º–µ–Ω—é –≤ Sheets

---

## üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–¢–õ–ò–ß–ò–Ø**

### ‚ùå **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–º–æ—è –ø—Ä–µ–¥—ã–¥—É—â–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è):**
–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –í–°–Å –≤ –æ–¥–Ω—É Google Sheets

### ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û:**
1. **–°–µ—Ä–≤–µ—Ä** - –æ—Ç–¥–µ–ª—å–Ω—ã–π Apps Script –ø—Ä–æ–µ–∫—Ç, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –∫–∞–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. **–ö–ª–∏–µ–Ω—Ç** - Google Sheets —Å Apps Script, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ —Å–µ—Ä–≤–µ—Ä—É

---

## üîß **–ù–ê–°–¢–†–û–ô–ö–ê –ö–û–ú–ú–£–ù–ò–ö–ê–¶–ò–ò**

### **–í –∫–ª–∏–µ–Ω—Ç–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```javascript
// Constants.gs
var SERVER_URL = 'https://script.google.com/macros/s/YOUR_SERVER_ID/exec';

// ThinClient.gs
function callServer(requestData) {
  var response = UrlFetchApp.fetch(SERVER_URL, {
    method: 'POST',
    contentType: 'application/json',
    payload: JSON.stringify(requestData)
  });
  return JSON.parse(response.getContentText());
}
```

### **–í —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```javascript
// ServerEndpoints.gs
function doPost(e) {
  var data = JSON.parse(e.postData.contents);
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
  return processApiRequest(data);
}
```

---

## üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ü–†–ê–í–ò–õ–¨–ù–û–ô –ê–†–•–ò–¢–ï–ö–¢–£–†–´**

‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞**  
‚úÖ **–ï–¥–∏–Ω—ã–π API –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤**  
‚úÖ **–õ—É—á—à–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** (–ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)  
‚úÖ **–õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ** (–∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** (–º–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Üí –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä)  
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è** (–æ–±–Ω–æ–≤–ª—è–µ–º —Å–µ—Ä–≤–µ—Ä ‚Üí –≤—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

---

## ‚ùó **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

1. **IGNORE –ø—Ä–µ–¥—ã–¥—É—â—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é INSTALLATION.md**
2. –°–æ–∑–¥–∞—Ç—å **–ù–û–í–£–Æ –ü–†–ê–í–ò–õ–¨–ù–£–Æ –ò–ù–°–¢–†–£–ö–¶–ò–Æ** –¥–ª—è –¥–≤—É—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π  
3. –û–±—ä—è—Å–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –∫–∞–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

**–ò–∑–≤–∏–Ω–∏—Ç–µ –∑–∞ –ø—É—Ç–∞–Ω–∏—Ü—É! –¢–µ–ø–µ—Ä—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–Ω—è—Ç–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.** üôè