# ü§ñ Table AI - Google Apps Script Bot

–£–º–Ω—ã–π AI-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å Google Sheets. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Gemini AI, OCR, VK API –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

## üöÄ –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**‚úÖ REFACTORING STARTED** - –û–∫—Ç—è–±—Ä—å 2025  
–ù–∞—á–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞.

### –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:
- [x] –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –±–æ—Ç–∞
- [x] –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤: –ø–∞–ø–∫–∞ `v3/` –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ —Å `client/` –∏ `server/`
- [x] –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–æ–¥–∞
- [x] –°–æ–∑–¥–∞–Ω–∏–µ comprehensive capability map

### –í –ø—Ä–æ—Ü–µ—Å—Å–µ:
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–æ—Å–ª–µ —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üß† Gemini AI Integration
- `GM()` - –∑–∞–ø—Ä–æ—Å—ã –∫ Gemini API
- `GM_STATIC()` - –∑–∞–º–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª –Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- `GM_IF_STATIC()` - —É—Å–ª–æ–≤–Ω—ã–µ Gemini –∑–∞–ø—Ä–æ—Å—ã
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ (5 –º–∏–Ω TTL)

### üì∑ OCR (Optical Character Recognition)
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —è—á–µ–π–∫–∞—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞: VK, Google Drive, Yandex.Disk, Dropbox
- –ê–≤—Ç–æ–∞–Ω–∞–ª–∏–∑ –æ—Ç–∑—ã–≤–æ–≤ —á–µ—Ä–µ–∑ Gemini AI

### üì± VK Posts Import
- –ò–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–æ–≤ –∏–∑ VK –≥—Ä—É–ø–ø
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞–º
- –í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤

### üîó Smart Chain (—É–º–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏)
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ B3‚ÜíC3‚ÜíD3‚ÜíE3‚ÜíF3‚ÜíG3
- –ê–≤—Ç–æ—Ç—Ä–∏–≥–≥–µ—Ä—ã –ø–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —à–∞–≥–æ–≤
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —á–µ—Ä–µ–∑ –ª–∏—Å—Ç "Prompt_box"

### ‚ö° Smart Prompts  
- –ê–≤—Ç–æ–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ "–ü—Ä–æ–º–ø—Ç: —Ç–µ–∫—Å—Ç" –≤ —Ñ–æ—Ä–º—É–ª—ã
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª –∑–∞–º–µ–Ω—ã —Å–ª–æ–≤ –Ω–∞ —Å—Å—ã–ª–∫–∏
- –°—Ç–∞—Ç–∏—á–Ω—ã–µ –∏ –¥–∏–Ω–∞–º–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

### üí¨ Chat Mode
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç –≤ –ª–∏—Å—Ç–µ "–ß–∞—Ç"
- A2 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) ‚Üî B2 (–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

### üîê License & Security
- Email + token –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Rate limiting
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤

## üìÇ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Client (`table/client/`)
UI –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Google Sheets:
- `Menu.gs` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ UI
- `GeminiClient.gs` - Gemini API –∫–ª–∏–µ–Ω—Ç
- `ThinClient.gs` - –ª–µ–≥–∫–∏–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏  
- `ChatMode.gs` - —Ä–µ–∂–∏–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —á–∞—Ç–∞
- `SmartPromptProcessor.gs` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

### Server (`table/server/`)
API endpoints –∏ —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è:
- `ServerEndpoints.gs` - –æ—Å–Ω–æ–≤–Ω—ã–µ API endpoints
- `SmartChainService.gs` - —Å–µ—Ä–≤–∏—Å —É–º–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫
- `VkImportService.gs` - –∏–º–ø–æ—Ä—Ç –ø–æ—Å—Ç–æ–≤ VK
- `OcrService.gs` - —Å–µ—Ä–≤–∏—Å OCR
- `LicenseService.gs` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏  
- `ContextManager.gs` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- `RulesEngine.gs` - –¥–≤–∏–∂–æ–∫ –ø—Ä–∞–≤–∏–ª –¥–ª—è —É–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- `TriggerManager.gs` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏

### Shared (`table/shared/`)
- `Constants.gs` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `Utils.gs` - —É—Ç–∏–ª–∏—Ç—ã

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. **Gemini API –∫–ª—é—á**: 
   - –ü–æ–ª—É—á–∏—Ç–µ –Ω–∞ https://aistudio.google.com/app/apikey
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ –º–µ–Ω—é: ü§ñ Table AI ‚Üí ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí üîë API –∫–ª—é—á Gemini

2. **–õ–∏—Ü–µ–Ω–∑–∏—è**:
   - –ü–æ–ª—É—á–∏—Ç–µ email + token —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑: ü§ñ Table AI ‚Üí ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí üîê –õ–∏—Ü–µ–Ω–∑–∏—è

3. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π**:
   - üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ø–æ—á–µ–∫
   - üß† –†–µ–∂–∏–º —á–∞—Ç–∞ - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
   - ‚ö° –£–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã - –∞–≤—Ç–æ–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ú–µ–Ω—é: ü§ñ Table AI ‚Üí ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ Credentials (email, token, API key)  
- üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
- üìã –ù–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ª–∏—Å—Ç–æ–≤
- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ OCR

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- Client: `logClient()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ script cache
- Server: `addSystemLog()` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üß™ Development

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```
table/
‚îú‚îÄ‚îÄ client/          # Google Sheets UI & –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
‚îú‚îÄ‚îÄ server/          # Web App API & —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è  
‚îú‚îÄ‚îÄ shared/          # –û–±—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ tests/           # –¢–µ—Å—Ç—ã
```

### DEV –º–µ–Ω—é
–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ `DEV_MODE = true`:
- üìù –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
- üß™ –¢–µ—Å—Ç—ã

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã: üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
2. –û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã: üîß –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã  
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã: üëÄ –ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –û–∫—Ç—è–±—Ä—å 2025 - Refactoring Phase*